[TOC]

# 多视图几何中的基础矩阵, 本质矩阵, 单应矩阵

## 1. 基础矩阵和本质矩阵

### 1.1 推导

$$
\lambda_2 x_2 = R(\lambda_1 x_1) + t
$$
其中, $x_1, x_2$ 表示空间中一点在相机的1和2两个位置的归一化坐标, $\lambda_1, \lambda_2$表示对应的深度. $R, t$ 表示从位置1到位置2的旋转和平移.  
在等式两侧先左乘 $\widehat{t}$, 然后左乘$x_2^{T}$ , 得到:  
$$
\lambda_2 x_2^{T}\widehat{t}x_2 =
x_2^{T}\widehat{t}R(\lambda_1 x_1) + x_2^{T}\widehat{t}t
\Rightarrow 0 = x_2^{T}\widehat{t}R(\lambda_1 x_1)
$$

将 $\lambda_1$ 去掉后就得到对极约束:  
$$
0 = x_2^{T} \widehat{t} R x_1 = x_2^{T} E x_1
$$
于是, 定义本质矩阵 $E = \widehat{t}R$ .  
又因为:  
$$
p_1 = K x_1, p_2 = K x_2
$$
其中, $p_1, p_2$ 为空间点在两个位置上的成像点的像素坐标 , 矩阵 $K$ 为相机的内参矩阵. 代入上述等式后, 可以得到:  
$$
0 = p_2^{T}K^{-T}\widehat{t}RK^{-1}p_1 = p_2^{T}Fp_1
$$
于是, 定义基础矩阵 $F = K^{-T}\widehat{t}RK^{-1}$ .  

**尺度等价性**

根据上述推导:  
$$
0 = x_2^{T}\widehat{t}R(\lambda_1 x_1) = x_2^{T}\widehat{t}R x_1
$$
因为这是一个等于0的等式, 所以把 $\lambda_1$ 去掉或者乘以任意常数对极约束都是满足的. 十四讲中这样描述:  
> 我们把这件事情称为 $E$ 在不同尺度下是等价的.

存疑: 总之, 认为因为这样的一件事情, 即尺度等价性, 导致了矩阵的自由度会少一个.  

**关于两个矩阵的秩**
矩阵大小为3x3, $E = \widehat{t}R$ 中的 $\widehat{t}$ 为反对称矩阵, 经过消元可得 $rank(\widehat{t}) = 2$ , 同时根据"左乘行变换, 右乘列变换", $R$ 和 $K$ 均为可逆矩阵, 并不会改变秩的大小, 所以 $rank(E) = rank (F) = 2$ .  

### 1.2 求解方法

**矩阵自由度的理解**: 假设需要n个参数可以确定矩阵, 那么矩阵的自由度即为n.  
本质矩阵 $E = \widehat{t} R$ , 可以由3自由度的平移向量 $t$ 确定, 旋转矩阵的大小虽然是3x3, 包含9个元素, 但是我们知道旋转矩阵是正交矩阵, 满足一定的约束, 可以和旋转向量(也称角轴)一一对应. 所以旋转矩阵的自由度也是3. 从上述推导我们知道本质矩阵存在尺度等价性, 所以减去1个自由度. 所以最后可以得到 $E$的自由度=3+3-1=5.  
基础矩阵 $F = K^{-T}\widehat{t}RK^{-1}$ , 自由度为7. (TODO, 有待理解!).  
所以本质上, 用5点法可以求解本质矩阵, 7点法可以求解基础矩阵.  

**8点法:**

**最小二乘+RANSAC**


### 1.3 退化情况

## 2. 单应矩阵

### 2.1 推导

### 2.2 求解方法

### 2.3 退化情况

## 3. 总结

## 参考

[为什么本质矩阵５自由度，基础矩阵７自由度，单应矩阵８自由度？ - 语冰的回答 - 知乎](https://www.zhihu.com/question/270431743/answer/401695352)

